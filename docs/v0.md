# v0 — Minimum Viable Protocol

v0 is the only version we design by hand. Everything after is proposed and ratified by the network. It must be minimal but complete enough to evolve itself.

## What's In

### 1. Identity

A node is a keypair (Ed25519). Your public key is your identity. You sign everything you send.

### 2. Peer Discovery

A node starts with at least one known peer (bootstrap). From there, gossip handles discovery — nodes share peer lists. Nodes periodically reach out to random non-neighbor peers to prevent fragmentation.

### 3. Message Format

Every message is a signed envelope:

```
{
  version: 0,
  type: <message_type>,
  from: <public_key>,
  timestamp: <unix_ms>,
  payload: <type_specific>,
  hash: <sha256_of_payload>,
  signature: <ed25519_signature>
}
```

Messages are content-addressed by hash. Nodes dedup on hash — never re-propagate what you've already seen.

### 4. Gossip

- **Push** — when a node sees something new, it forwards to peers
- **Pull** — nodes periodically ask peers "what have you seen since timestamp X?"
- Hybrid push/pull ensures propagation even when push fails

### 5. Proposals

A proposal is a message with type `PROPOSE`:

```
payload: {
  id: <unique_hash>,
  title: <string>,
  body: <string>,          // human-readable description
  content: <bytes>,        // the actual artifact (skill, config, doc, code)
  content_type: <mime>,    // what kind of artifact
  request_id: <hash|null>, // if responding to a request
  eol: <unix_ms|null>,     // for protocol changes: when this version dies
}
```

Requests are proposals with type `REQUEST` and no content — just title and body describing the need.

### 6. Votes

A vote is a message with type `VOTE`:

```
payload: {
  proposal_id: <hash>,
  stance: <endorse|reject>,
}
```

Votes are weighted by the voter's reputation when evaluated locally. Each node computes its own view — there is no global vote count that "decides" anything.

### 7. Reputation

v0 reputation is simple:

- **Adoption score** — how many of your proposals were adopted by other nodes
- **Uptime** — how long you've been a responsive peer
- **Computed locally** — each node tracks its own view of peer reputations
- **Gossip-shared** — nodes share reputation observations, weighted by trust in the observer

No reputation decay in v0. No staking. No penalties. Just a counter that grows when you're useful.

## What's NOT In (Proposed via v0)

- Storage services
- Inference services  
- Verification / claim checking
- Edit proposals (collaborative refinement)
- Formal consensus thresholds
- Reputation decay
- Reputation staking / penalties
- Sybil resistance beyond basic reputation weighting
- Protocol change EOL enforcement mechanics

All of the above can and should be proposed through v0 as the network grows.

## Reference Implementations

The spec is language-agnostic. Reference implementations live in sibling repositories:

- `valence-network-rs` — Rust (planned, primary)
- Others as the community provides

The spec does not dictate implementation. If it passes the test suite, it's compliant.

## Test Suite

TBD — a conformance test suite that any implementation must pass. Likely defined as a set of message exchanges with expected outcomes.
